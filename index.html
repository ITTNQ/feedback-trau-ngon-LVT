<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <title>Đánh giá chất lượng phục vụ – TRÂU NGON QUÁN</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root{
      --primary:#ffca08;
      --neutral:#ccc;
      --bg:#f9fafb;
    }
    body{
      font-family: system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
      background:var(--bg);
      margin:0;
      display:flex;
      justify-content:center;
      padding:2rem;
    }
    /*------------- Card & Watermark -------------*/
    .card{
      background:#fff;
      border-radius:1rem;
      box-shadow:0 4px 20px rgba(0,0,0,.08);
      max-width:480px;
      width:100%;
      padding:1.5rem 2rem;
      position:relative;           /* enable pseudo‑element */
      overflow:hidden;             /* hide excess logo */
    }
    /* pseudo‑element làm logo mờ 20% */
    .card::before{
      content:"";
      position:absolute;
      inset:0;
      background:url('LOGO.png') center/80% no-repeat; /* để file LOGO.png cùng thư mục */
      opacity:0.2;                /* ~20% */
      z-index:0;                  /* dưới nội dung */
      pointer-events:none;
    }
    /* đặt z‑index cho mọi phần tử con để nằm trên watermark */
    .card *{position:relative; z-index:1;}

    /*------------- Typography & Form -------------*/
    h1, h2{text-align:center;margin:0;}
    h2{font-size:1.5rem;text-transform:uppercase;}
    .restaurant-name{text-align:center;font-weight:700;margin:.5rem 0 1.5rem;text-transform:uppercase;font-size:1.25rem;}

    label{display:block;margin:.75rem 0 .25rem;font-weight:600;}
    textarea{resize:vertical;min-height:90px;}
    input[type="text"],input[type="tel"],textarea{
      width:100%;padding:.5rem .75rem;border:1px solid #ddd;border-radius:.5rem;font-size:1rem;
    }

    /*------------- Rating Stars -------------*/
    .rating{direction:rtl;display:inline-flex;gap:.25rem;font-size:1.75rem;}
    .rating>input{display:none;}
    .rating>label{cursor:pointer;color:var(--neutral);transition:color .2s;}
    .rating>input:checked~label,
    .rating>label:hover,
    .rating>label:hover~label{color:var(--primary);}

    /*------------- Button -------------*/
    button{display:block;margin:1.5rem auto 0;padding:.6rem 1.5rem;border:none;background:var(--primary);color:#000;font-weight:600;border-radius:.5rem;font-size:1rem;cursor:pointer;transition:transform .15s;}
    button:active{transform:scale(.97);} 
  </style>
</head>
<body>
  <div class="card">
      <h2>ĐÁNH GIÁ CHẤT LƯỢNG PHỤC VỤ</h2>
      <p class="restaurant-name">NHÀ HÀNG TRÂU NGON QUÁN</p>

    <form id="fbForm" autocomplete="off">
      <label for="customerName">Tên khách hàng</label>
      <input id="customerName" name="customerName" type="text" placeholder="Nguyễn Văn A" required>

      <label for="phone">Số điện thoại</label>
      <input id="phone" name="phone" type="tel" inputmode="numeric" pattern="\d{10}" maxlength="10" placeholder="0123456789" required title="Nhập đúng 10 chữ số">

      <label>Chất lượng món ăn</label>
      <div class="rating">
        <input id="food5" type="radio" name="foodQuality" value="5" required><label for="food5">★</label>
        <input id="food4" type="radio" name="foodQuality" value="4"><label for="food4">★</label>
        <input id="food3" type="radio" name="foodQuality" value="3"><label for="food3">★</label>
        <input id="food2" type="radio" name="foodQuality" value="2"><label for="food2">★</label>
        <input id="food1" type="radio" name="foodQuality" value="1"><label for="food1">★</label>
      </div>

      <label>Phục vụ</label>
      <div class="rating">
        <input id="service5" type="radio" name="service" value="5" required><label for="service5">★</label>
        <input id="service4" type="radio" name="service" value="4"><label for="service4">★</label>
        <input id="service3" type="radio" name="service" value="3"><label for="service3">★</label>
        <input id="service2" type="radio" name="service" value="2"><label for="service2">★</label>
        <input id="service1" type="radio" name="service" value="1"><label for="service1">★</label>
      </div>

      <label>Vệ sinh</label>
      <div class="rating">
        <input id="clean5" type="radio" name="cleanliness" value="5" required><label for="clean5">★</label>
        <input id="clean4" type="radio" name="cleanliness" value="4"><label for="clean4">★</label>
        <input id="clean3" type="radio" name="cleanliness" value="3"><label for="clean3">★</label>
        <input id="clean2" type="radio" name="cleanliness" value="2"><label for="clean2">★</label>
        <input id="clean1" type="radio" name="cleanliness" value="1"><label for="clean1">★</label>
      </div>

      <label for="notes">Ghi chú</label>
      <textarea id="notes" name="notes" placeholder="Ấn tượng, món gọi, v.v."></textarea>

      <button type="submit">Gửi đánh giá</button>
    </form>
  </div>

  <script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbyK1o3oj_1nupWHZSxyjELU0FTPEi4A8RMrqoCTKXDSB6Hn_AifB_5-687gN5yuhNc9IQ/exec';
    const form = document.getElementById('fbForm');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const formData = new FormData(form);
      const data = Object.fromEntries(formData.entries());

      if(!/^\d{10}$/.test(data.phone)){
        alert('Vui lòng nhập số điện thoại gồm đúng 10 chữ số.');
        return;
      }

      data.restaurant = 'TRÂU NGON QUÁN';

      try {
        await fetch(scriptURL, {
          method: 'POST',
          mode: 'no-cors',
          headers: {'Content-Type':'application/json'},
          body: JSON.stringify(data)
        });
        alert(`Cảm ơn anh/chị ${data.customerName} đã đánh giá!`);
        form.reset();
        document.querySelectorAll('.rating input').forEach(i => i.checked = false);
      } catch (err) {
        console.error(err);
        alert('Có lỗi xảy ra, vui lòng thử lại.');
      }
    });
  </script>
</body>
</html>
